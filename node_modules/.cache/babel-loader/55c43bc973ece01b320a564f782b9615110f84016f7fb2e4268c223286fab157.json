{"ast":null,"code":"import \"../../public/assets/css/chat.css\";\nimport \"../../public/assets/emoji/emojis.css\";\nimport \"../../public/assets/emoji/DisMojiPicker.js\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport store from \"../vuex/store\";\nexport default {\n  data() {\n    return {\n      attachment: null,\n      message: \"\",\n      email: this.$route.params.email,\n      page: 0,\n      receiver: null,\n      base64Str: \"\",\n      downloadFileName: \"\",\n      btnLoadMoreClass: \"fa fa-repeat\",\n      hasMoreMessages: true,\n      selectedMessageId: 0,\n      selectedMessageText: \"\",\n      isShowingBookmarked: false,\n      isArchive: false,\n      password: \"\"\n    };\n  },\n  computed: {\n    messages() {\n      return store.getters.getMessages;\n    }\n  },\n  methods: {\n    verifyArchivedPassword: async function () {\n      const self = this;\n      const form = event.target;\n      const formData = new FormData(form);\n      formData.append(\"email\", this.email);\n      const response = await axios.post(this.$apiURL + \"/chat/verifyArchivedPassword\", formData, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        this.isArchive = response.data.isArchive;\n        this.password = form.password.value;\n        if (this.isArchive) {\n          store.commit(\"setMessages\", []);\n          this.getData();\n          setTimeout(function () {\n            self.initializeEmoji();\n          }, 500);\n        }\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    showBookmarkedMessages: async function () {\n      store.commit(\"setMessages\", []);\n      if (this.isShowingBookmarked) {\n        this.page = 0;\n        this.getData();\n        this.isShowingBookmarked = false;\n      } else {\n        const formData = new FormData();\n        formData.append(\"email\", this.email);\n        formData.append(\"password\", this.password);\n        const response = await axios.post(this.$apiURL + \"/chat/getBookmarked\", formData, {\n          headers: this.$headers\n        });\n        if (response.data.status == \"success\") {\n          for (let a = 0; a < response.data.data.length; a++) {\n            store.commit(\"prependMessage\", response.data.data[a]);\n          }\n          this.attachEventListeners();\n        } else {\n          swal.fire(\"Error\", response.data.message, \"error\");\n        }\n        this.isShowingBookmarked = true;\n      }\n    },\n    copyMessage: function () {\n      navigator.clipboard.writeText(this.selectedMessageText);\n    },\n    bookmarkMessage: async function () {\n      const target = event.target;\n      const formData = new FormData();\n      formData.append(\"_id\", this.selectedMessageId);\n      formData.append(\"password\", this.password);\n      const response = await axios.post(this.$apiURL + \"/chat/bookmark\", formData, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        for (let a = 0; a < this.messages.length; a++) {\n          if (this.messages[a]._id == this.selectedMessageId) {\n            this.messages[a] = response.data.newMessage;\n            break;\n          }\n        }\n        store.commit(\"setMessages\", this.messages);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    hideMoreOptions: function () {\n      document.getElementById(\"contextMenu\").style.display = \"none\";\n    },\n    showMoreOptions: function (msg) {\n      const isMyMessage = event.target.getAttribute(\"is-my-message\");\n      this.selectedMessageId = msg._id;\n      this.selectedMessageText = msg.message;\n      var menu = document.getElementById(\"contextMenu\");\n      menu.style.display = \"block\";\n      if (isMyMessage == \"true\") {\n        menu.style.left = event.pageX - 200 + \"px\";\n      } else {\n        menu.style.left = event.pageX + \"px\";\n      }\n      menu.style.top = event.pageY + \"px\";\n      document.querySelector(\".bookmark i\").className = \"fa fa-bookmark-o\";\n      if (msg.bookmarkBy) {\n        document.querySelector(\".bookmark i\").className = \"fa fa-bookmark\";\n      }\n    },\n    attachEventListeners: function () {\n      const self = this;\n      document.addEventListener(\"click\", function (e) {\n        const moreOptions = document.querySelectorAll(\".more-options\");\n        let isClickedMoreOptions = true;\n        for (let a = 0; a < moreOptions.length; a++) {\n          if (moreOptions[a].contains(e.target)) {\n            // Clicked in box\n            isClickedMoreOptions = true;\n            break;\n          } else {\n            // Clicked outside the box\n            isClickedMoreOptions = false;\n          }\n        }\n        if (!isClickedMoreOptions) {\n          self.hideMoreOptions();\n        }\n      });\n    },\n    getChatPersonPicture: function (user) {\n      if (typeof user.picture !== \"undefined\" && user.picture != \"\") {\n        return this.$apiURL + \"/\" + user.picture;\n      }\n      return \"../../assets/img/avatar2.png\";\n    },\n    getPicture: function (user) {\n      if (typeof user.picture !== \"undefined\") {\n        return this.$apiURL + \"/\" + user.picture;\n      }\n      return \"../../assets/img/avatar7.png\";\n    },\n    doSearch: async function () {\n      const form = event.target;\n      const formData = new FormData(form);\n      formData.append(\"email\", this.email);\n      formData.append(\"password\", this.password);\n      const response = await axios.post(this.$apiURL + \"/chat/search\", formData, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        store.commit(\"setMessages\", []);\n        for (let a = 0; a < response.data.data.length; a++) {\n          store.commit(\"prependMessage\", response.data.data[a]);\n        }\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    downloadAttachment: async function () {\n      const anchor = event.target;\n      const id = anchor.getAttribute(\"data-id\");\n      const originalHtml = anchor.innerHTML;\n      anchor.innerHTML = \"Loading...\";\n      const formData = new FormData();\n      formData.append(\"messageId\", id);\n      formData.append(\"password\", this.password);\n      const response = await axios.post(this.$apiURL + \"/chat/attachment\", formData, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        this.base64Str = response.data.base64Str;\n        this.downloadFileName = response.data.fileName;\n        const btnDownloadAttachment = this.$refs[\"btnDownloadAttachment\"];\n        setTimeout(function () {\n          btnDownloadAttachment.click();\n          anchor.innerHTML = originalHtml;\n        }, 500);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    fileSelected: function () {\n      const files = event.target.files;\n      if (files.length > 0) {\n        this.attachment = files[0];\n      }\n    },\n    selectFile: function () {\n      document.getElementById(\"attachment\").click();\n    },\n    getMessageTime: function (time) {\n      const dateObj = new Date(time);\n      let timeStr = dateObj.getFullYear() + \"-\" + (dateObj.getMonth() + 1) + \"-\" + dateObj.getDate() + \" \" + dateObj.getHours() + \":\" + dateObj.getMinutes() + \":\" + dateObj.getSeconds();\n      return timeStr;\n    },\n    loadMore: function () {\n      this.btnLoadMoreClass = \"fa fa-spinner fa-spin\";\n      this.page++;\n      this.getData();\n    },\n    getData: async function () {\n      if (this.email == null) {\n        return;\n      }\n      const formData = new FormData();\n      formData.append(\"email\", this.email);\n      formData.append(\"page\", this.page);\n      formData.append(\"password\", this.password);\n      const response = await axios.post(this.$apiURL + \"/chat/fetch\", formData, {\n        headers: this.$headers\n      });\n      this.btnLoadMoreClass = \"fa fa-repeat\";\n      if (response.data.status == \"success\") {\n        for (let a = 0; a < response.data.messages.length; a++) {\n          store.commit(\"prependMessage\", response.data.messages[a]);\n        }\n        this.hasMoreMessages = response.data.messages.length == 0 ? false : true;\n        this.receiver = response.data.receiver;\n        this.user = response.data.user;\n        this.isArchive = response.data.isArchive;\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    sendMessage: async function () {\n      const formData = new FormData();\n      formData.append(\"email\", this.email);\n      formData.append(\"message\", this.message);\n      formData.append(\"password\", this.password);\n      if (this.attachment != null) {\n        formData.append(\"attachment\", this.attachment);\n      }\n      const response = await axios.post(this.$apiURL + \"/chat/send\", formData, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        this.message = \"\";\n        this.attachment = null;\n        document.getElementById(\"attachment\").value = null;\n        store.commit(\"appendMessage\", response.data.messageObject);\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    initializeEmoji: function () {\n      const self = this;\n      $(\"#emojis\").disMojiPicker();\n      twemoji.parse(document.body);\n      $(\"#emojis\").picker(function (emoji) {\n        self.message += emoji;\n      });\n    }\n  },\n  mounted() {\n    this.getData();\n    this.initializeEmoji();\n\n    /*document.addEventListener(\"click\", function () {\n    self.hideMoreOptions()\n    })\n        \t\tdocument.oncontextmenu = function () {\n       \t\t\tevent.preventDefault()\n              if (document.getElementById(\"contextMenu\").style.display == \"block\"){ \n                 hideMenu(); \n             }else{ \n                 var menu = document.getElementById(\"contextMenu\")      \n                 menu.style.display = 'block'; \n                 menu.style.left = event.pageX + \"px\"; \n                 menu.style.top = event.pageY + \"px\"; \n             }\n       \t\t}*/\n  },\n\n  watch: {\n    $route: function (to, from) {\n      if (from.href.includes(\"/chat/\")) {\n        store.commit(\"setMessages\", []);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","swal","store","data","attachment","message","email","$route","params","page","receiver","base64Str","downloadFileName","btnLoadMoreClass","hasMoreMessages","selectedMessageId","selectedMessageText","isShowingBookmarked","isArchive","password","computed","messages","getters","getMessages","methods","verifyArchivedPassword","self","form","event","target","formData","FormData","append","response","post","$apiURL","headers","$headers","status","value","commit","getData","setTimeout","initializeEmoji","fire","showBookmarkedMessages","a","length","attachEventListeners","copyMessage","navigator","clipboard","writeText","bookmarkMessage","_id","newMessage","hideMoreOptions","document","getElementById","style","display","showMoreOptions","msg","isMyMessage","getAttribute","menu","left","pageX","top","pageY","querySelector","className","bookmarkBy","addEventListener","e","moreOptions","querySelectorAll","isClickedMoreOptions","contains","getChatPersonPicture","user","picture","getPicture","doSearch","downloadAttachment","anchor","id","originalHtml","innerHTML","fileName","btnDownloadAttachment","$refs","click","fileSelected","files","selectFile","getMessageTime","time","dateObj","Date","timeStr","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","loadMore","sendMessage","messageObject","$","disMojiPicker","twemoji","parse","body","picker","emoji","mounted","watch","to","from","href","includes"],"sources":["D:\\Laptrinh\\Phat_trien_ung_dung_web\\Projects\\Web-Chat\\CT449-WebChat-MEVN-FrontEnd-BuiLeNhutHao-B1910370\\src\\components\\ChatComponent.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row clearfix\">\n      <div class=\"col-lg-12\">\n        <div class=\"card\" v-if=\"isArchive\">\n          <div class=\"card-body\">\n            <h2 class=\"text-center\" style=\"margin-top: 20px\">\n              This chat has been archived\n            </h2>\n\n            <div class=\"row\" style=\"margin-top: 100px; margin-bottom: 100px\">\n              <div class=\"offset-md-4 col-md-4\">\n                <form v-on:submit.prevent=\"verifyArchivedPassword\">\n                  <div class=\"form-group\" style=\"margin-bottom: 10px\">\n                    <label>Enter password</label>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      class=\"form-control\"\n                      required\n                      style=\"margin-top: 10px\"\n                    />\n                  </div>\n\n                  <input\n                    type=\"submit\"\n                    class=\"btn btn-danger\"\n                    value=\"Open chat\"\n                  />\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"card chat-app\" v-if=\"!isArchive\">\n          <div class=\"chat\">\n            <div class=\"chat-header clearfix\">\n              <div class=\"row\">\n                <div class=\"col-lg-6\">\n                  <a\n                    href=\"javascript:void(0);\"\n                    data-toggle=\"modal\"\n                    data-target=\"#view_info\"\n                  >\n                    <img\n                      v-if=\"receiver != null\"\n                      v-bind:src=\"getChatPersonPicture(receiver)\"\n                      alt=\"avatar\"\n                      style=\"width: 50px\"\n                    />\n                  </a>\n\n                  <div class=\"chat-about\">\n                    <h6\n                      class=\"m-b-0 text-white\"\n                      v-if=\"receiver != null\"\n                      v-text=\"receiver.name\"\n                      style=\"margin-bottom: 0px; position: relative; top: 10px\"\n                    ></h6>\n                  </div>\n                </div>\n\n                <div class=\"col-lg-6 hidden-sm text-right text-white\">\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-primary\"\n                    style=\"margin-right: 10px\"\n                    v-on:click=\"showBookmarkedMessages\"\n                    v-text=\"\n                      isShowingBookmarked\n                        ? 'All messages'\n                        : 'Bookmarked messages'\n                    \"\n                  ></button>\n\n                  <form\n                    style=\"display: inline-block\"\n                    v-on:submit.prevent=\"doSearch\"\n                  >\n                    <div class=\"form-group\" style=\"display: flex\">\n                      <input type=\"search\" name=\"search\" autocomplete=\"off\" />\n                      <button type=\"submit\" class=\"btn btn-link\">\n                        <i class=\"fa fa-search\"></i>\n                      </button>\n                    </div>\n                  </form>\n\n                  <span\n                    v-if=\"attachment != null\"\n                    style=\"margin-right: 10px; position: relative; top: 7px\"\n                    v-text=\"attachment.name\"\n                  ></span>\n                  <a\n                    href=\"javascript:void(0);\"\n                    class=\"btn btn-outline-secondary pull-right text-white\"\n                    v-on:click=\"selectFile\"\n                    ><i class=\"fa fa-paperclip\"></i\n                  ></a>\n                  <input\n                    type=\"file\"\n                    id=\"attachment\"\n                    style=\"display: none\"\n                    v-on:change=\"fileSelected\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div class=\"chat-history\">\n              <ul class=\"m-b-0\">\n                <li style=\"text-align: center\">\n                  <i\n                    v-bind:class=\"btnLoadMoreClass + ' btnLoadMore'\"\n                    v-on:click=\"loadMore\"\n                    v-if=\"hasMoreMessages\"\n                  ></i>\n                </li>\n\n                <li\n                  v-for=\"msg in messages\"\n                  class=\"clearfix\"\n                  v-bind:key=\"msg._id\"\n                >\n                  <div\n                    class=\"more-options\"\n                    v-on:click=\"showMoreOptions(msg)\"\n                    v-bind:is-my-message=\"\n                      user != null && user.email == msg.sender.email\n                    \"\n                    v-bind:style=\"\n                      user != null && user.email == msg.sender.email\n                        ? { float: 'right' }\n                        : { position: 'relative', top: '15px' }\n                    \"\n                  ></div>\n\n                  <div\n                    v-bind:class=\"\n                      'message ' +\n                      (user != null && user.email == msg.sender.email\n                        ? 'my-message float-right'\n                        : 'other-message')\n                    \"\n                  >\n                    <p\n                      v-text=\"msg.message\"\n                      v-bind:class=\"\n                        user != null && user.email == msg.sender.email\n                          ? 'text-right'\n                          : ''\n                      \"\n                      style=\"margin-bottom: 0px\"\n                    ></p>\n\n                    <template v-if=\"msg.attachment != null\">\n                      <a\n                        href=\"javascript:void(0)\"\n                        v-bind:data-id=\"msg._id\"\n                        v-on:click.prevent=\"downloadAttachment\"\n                        v-text=\"msg.attachment.displayName\"\n                        class=\"text-info\"\n                        target=\"_blank\"\n                      ></a>\n                    </template>\n                  </div>\n\n                  <div\n                    v-bind:class=\"\n                      'message-data ' +\n                      (user != null && user.email == msg.sender.email\n                        ? 'float-right'\n                        : '')\n                    \"\n                  >\n                    <span\n                      class=\"message-data-time text-white\"\n                      v-text=\"getMessageTime(msg.createdAt)\"\n                      style=\"margin-right: 10px\"\n                    ></span>\n                    <img\n                      v-bind:src=\"getPicture(msg.sender)\"\n                      alt=\"avatar\"\n                      style=\"width: 100px\"\n                    />\n                  </div>\n                </li>\n              </ul>\n            </div>\n\n            <div class=\"chat-message clearfix\">\n              <div class=\"input-group mb-0\">\n                <div class=\"input-group mb-3\">\n                  <input\n                    type=\"text\"\n                    class=\"form-control send-message\"\n                    placeholder=\"Enter text here...\"\n                    v-model=\"message\"\n                  />\n\n                  <button\n                    class=\"btn btn-primary\"\n                    v-on:click=\"sendMessage\"\n                    type=\"button\"\n                  >\n                    Send\n                  </button>\n                </div>\n              </div>\n\n              <div id=\"emojis\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- <a\n    v-bind:href=\"base64Str\"\n    ref=\"btnDownloadAttachment\"\n    v-bind:download=\"downloadFileName\"\n  ></a> -->\n\n  <!-- <div id=\"contextMenu\" class=\"context-menu\" style=\"display: none\">\n    <ul class=\"menu\">\n      <li class=\"copy\">\n        <a href=\"javascript:void(0)\" v-on:click=\"copyMessage\"\n          ><i class=\"fa fa-copy\" aria-hidden=\"true\"></i> Copy</a\n        >\n      </li>\n\n      <li class=\"bookmark\">\n        <a href=\"javascript:void(0)\" v-on:click=\"bookmarkMessage\"\n          ><i class=\"fa fa-bookmark-o\" aria-hidden=\"true\"></i> Bookmark</a\n        >\n      </li>\n    </ul>\n  </div> -->\n</template>\n\n<script>\nimport \"../../public/assets/css/chat.css\";\nimport \"../../public/assets/emoji/emojis.css\";\nimport \"../../public/assets/emoji/DisMojiPicker.js\";\n\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport store from \"../vuex/store\";\n\nexport default {\n  data() {\n    return {\n      attachment: null,\n      message: \"\",\n      email: this.$route.params.email,\n      page: 0,\n      receiver: null,\n      base64Str: \"\",\n      downloadFileName: \"\",\n      btnLoadMoreClass: \"fa fa-repeat\",\n      hasMoreMessages: true,\n      selectedMessageId: 0,\n      selectedMessageText: \"\",\n      isShowingBookmarked: false,\n      isArchive: false,\n      password: \"\",\n    };\n  },\n\n  computed: {\n    messages() {\n      return store.getters.getMessages;\n    },\n  },\n\n  methods: {\n    verifyArchivedPassword: async function () {\n      const self = this;\n      const form = event.target;\n      const formData = new FormData(form);\n      formData.append(\"email\", this.email);\n\n      const response = await axios.post(\n        this.$apiURL + \"/chat/verifyArchivedPassword\",\n        formData,\n        {\n          headers: this.$headers,\n        }\n      );\n\n      if (response.data.status == \"success\") {\n        this.isArchive = response.data.isArchive;\n        this.password = form.password.value;\n\n        if (this.isArchive) {\n          store.commit(\"setMessages\", []);\n          this.getData();\n\n          setTimeout(function () {\n            self.initializeEmoji();\n          }, 500);\n        }\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    showBookmarkedMessages: async function () {\n      store.commit(\"setMessages\", []);\n\n      if (this.isShowingBookmarked) {\n        this.page = 0;\n        this.getData();\n        this.isShowingBookmarked = false;\n      } else {\n        const formData = new FormData();\n        formData.append(\"email\", this.email);\n        formData.append(\"password\", this.password);\n\n        const response = await axios.post(\n          this.$apiURL + \"/chat/getBookmarked\",\n          formData,\n          {\n            headers: this.$headers,\n          }\n        );\n\n        if (response.data.status == \"success\") {\n          for (let a = 0; a < response.data.data.length; a++) {\n            store.commit(\"prependMessage\", response.data.data[a]);\n          }\n          this.attachEventListeners();\n        } else {\n          swal.fire(\"Error\", response.data.message, \"error\");\n        }\n\n        this.isShowingBookmarked = true;\n      }\n    },\n\n    copyMessage: function () {\n      navigator.clipboard.writeText(this.selectedMessageText);\n    },\n\n    bookmarkMessage: async function () {\n      const target = event.target;\n      const formData = new FormData();\n      formData.append(\"_id\", this.selectedMessageId);\n      formData.append(\"password\", this.password);\n\n      const response = await axios.post(\n        this.$apiURL + \"/chat/bookmark\",\n        formData,\n        {\n          headers: this.$headers,\n        }\n      );\n\n      if (response.data.status == \"success\") {\n        for (let a = 0; a < this.messages.length; a++) {\n          if (this.messages[a]._id == this.selectedMessageId) {\n            this.messages[a] = response.data.newMessage;\n            break;\n          }\n        }\n        store.commit(\"setMessages\", this.messages);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    hideMoreOptions: function () {\n      document.getElementById(\"contextMenu\").style.display = \"none\";\n    },\n\n    showMoreOptions: function (msg) {\n      const isMyMessage = event.target.getAttribute(\"is-my-message\");\n      this.selectedMessageId = msg._id;\n      this.selectedMessageText = msg.message;\n\n      var menu = document.getElementById(\"contextMenu\");\n      menu.style.display = \"block\";\n      if (isMyMessage == \"true\") {\n        menu.style.left = event.pageX - 200 + \"px\";\n      } else {\n        menu.style.left = event.pageX + \"px\";\n      }\n      menu.style.top = event.pageY + \"px\";\n\n      document.querySelector(\".bookmark i\").className = \"fa fa-bookmark-o\";\n\n      if (msg.bookmarkBy) {\n        document.querySelector(\".bookmark i\").className = \"fa fa-bookmark\";\n      }\n    },\n\n    attachEventListeners: function () {\n      const self = this;\n\n      document.addEventListener(\"click\", function (e) {\n        const moreOptions = document.querySelectorAll(\".more-options\");\n        let isClickedMoreOptions = true;\n        for (let a = 0; a < moreOptions.length; a++) {\n          if (moreOptions[a].contains(e.target)) {\n            // Clicked in box\n            isClickedMoreOptions = true;\n            break;\n          } else {\n            // Clicked outside the box\n            isClickedMoreOptions = false;\n          }\n        }\n        if (!isClickedMoreOptions) {\n          self.hideMoreOptions();\n        }\n      });\n    },\n\n    getChatPersonPicture: function (user) {\n      if (typeof user.picture !== \"undefined\" && user.picture != \"\") {\n        return this.$apiURL + \"/\" + user.picture;\n      }\n      return \"../../assets/img/avatar2.png\";\n    },\n\n    getPicture: function (user) {\n      if (typeof user.picture !== \"undefined\") {\n        return this.$apiURL + \"/\" + user.picture;\n      }\n      return \"../../assets/img/avatar7.png\";\n    },\n\n    doSearch: async function () {\n      const form = event.target;\n      const formData = new FormData(form);\n      formData.append(\"email\", this.email);\n      formData.append(\"password\", this.password);\n\n      const response = await axios.post(\n        this.$apiURL + \"/chat/search\",\n        formData,\n        {\n          headers: this.$headers,\n        }\n      );\n\n      if (response.data.status == \"success\") {\n        store.commit(\"setMessages\", []);\n        for (let a = 0; a < response.data.data.length; a++) {\n          store.commit(\"prependMessage\", response.data.data[a]);\n        }\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    downloadAttachment: async function () {\n      const anchor = event.target;\n      const id = anchor.getAttribute(\"data-id\");\n      const originalHtml = anchor.innerHTML;\n      anchor.innerHTML = \"Loading...\";\n\n      const formData = new FormData();\n      formData.append(\"messageId\", id);\n      formData.append(\"password\", this.password);\n\n      const response = await axios.post(\n        this.$apiURL + \"/chat/attachment\",\n        formData,\n        {\n          headers: this.$headers,\n        }\n      );\n\n      if (response.data.status == \"success\") {\n        this.base64Str = response.data.base64Str;\n        this.downloadFileName = response.data.fileName;\n\n        const btnDownloadAttachment = this.$refs[\"btnDownloadAttachment\"];\n        setTimeout(function () {\n          btnDownloadAttachment.click();\n          anchor.innerHTML = originalHtml;\n        }, 500);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    fileSelected: function () {\n      const files = event.target.files;\n      if (files.length > 0) {\n        this.attachment = files[0];\n      }\n    },\n\n    selectFile: function () {\n      document.getElementById(\"attachment\").click();\n    },\n\n    getMessageTime: function (time) {\n      const dateObj = new Date(time);\n      let timeStr =\n        dateObj.getFullYear() +\n        \"-\" +\n        (dateObj.getMonth() + 1) +\n        \"-\" +\n        dateObj.getDate() +\n        \" \" +\n        dateObj.getHours() +\n        \":\" +\n        dateObj.getMinutes() +\n        \":\" +\n        dateObj.getSeconds();\n      return timeStr;\n    },\n\n    loadMore: function () {\n      this.btnLoadMoreClass = \"fa fa-spinner fa-spin\";\n      this.page++;\n      this.getData();\n    },\n\n    getData: async function () {\n      if (this.email == null) {\n        return;\n      }\n\n      const formData = new FormData();\n      formData.append(\"email\", this.email);\n      formData.append(\"page\", this.page);\n      formData.append(\"password\", this.password);\n\n      const response = await axios.post(\n        this.$apiURL + \"/chat/fetch\",\n        formData,\n        {\n          headers: this.$headers,\n        }\n      );\n\n      this.btnLoadMoreClass = \"fa fa-repeat\";\n\n      if (response.data.status == \"success\") {\n        for (let a = 0; a < response.data.messages.length; a++) {\n          store.commit(\"prependMessage\", response.data.messages[a]);\n        }\n        this.hasMoreMessages =\n          response.data.messages.length == 0 ? false : true;\n        this.receiver = response.data.receiver;\n        this.user = response.data.user;\n        this.isArchive = response.data.isArchive;\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    sendMessage: async function () {\n      const formData = new FormData();\n      formData.append(\"email\", this.email);\n      formData.append(\"message\", this.message);\n      formData.append(\"password\", this.password);\n      if (this.attachment != null) {\n        formData.append(\"attachment\", this.attachment);\n      }\n\n      const response = await axios.post(this.$apiURL + \"/chat/send\", formData, {\n        headers: this.$headers,\n      });\n\n      if (response.data.status == \"success\") {\n        this.message = \"\";\n\n        this.attachment = null;\n        document.getElementById(\"attachment\").value = null;\n\n        store.commit(\"appendMessage\", response.data.messageObject);\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    initializeEmoji: function () {\n      const self = this;\n      $(\"#emojis\").disMojiPicker();\n      twemoji.parse(document.body);\n      $(\"#emojis\").picker(function (emoji) {\n        self.message += emoji;\n      });\n    },\n  },\n\n  mounted() {\n    this.getData();\n    this.initializeEmoji();\n\n    /*document.addEventListener(\"click\", function () {\n\t\t\t\tself.hideMoreOptions()\n\t\t\t})\n\n       \t\tdocument.oncontextmenu = function () {\n       \t\t\tevent.preventDefault()\n\n\t            if (document.getElementById(\"contextMenu\").style.display == \"block\"){ \n\t                hideMenu(); \n\t            }else{ \n\t                var menu = document.getElementById(\"contextMenu\")      \n\t                menu.style.display = 'block'; \n\t                menu.style.left = event.pageX + \"px\"; \n\t                menu.style.top = event.pageY + \"px\"; \n\t            }\n       \t\t}*/\n  },\n\n  watch: {\n    $route: function (to, from) {\n      if (from.href.includes(\"/chat/\")) {\n        store.commit(\"setMessages\", []);\n      }\n    },\n  },\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}