{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container-fluid\",\n  id: \"home-page\",\n  style: {\n    \"padding-top\": \"50px\",\n    \"padding-bottom\": \"50px\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"row\",\n  style: {\n    \"margin-bottom\": \"50px\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"offset-md-10 col-md-2\"\n};\nconst _hoisted_4 = {\n  class: \"container-fluid h-100\"\n};\nconst _hoisted_5 = {\n  class: \"row justify-content-center h-100\"\n};\nconst _hoisted_6 = {\n  class: \"col-md-4 col-xl-3 chat\"\n};\nconst _hoisted_7 = {\n  class: \"card mb-sm-3 mb-md-0 contacts_card\"\n};\nconst _hoisted_8 = {\n  class: \"card-header\"\n};\nconst _hoisted_9 = {\n  class: \"input-group\"\n};\nconst _hoisted_10 = {\n  class: \"input-group-prepend\"\n};\nconst _hoisted_11 = {\n  class: \"input-group-text search_btn\"\n};\nconst _hoisted_12 = {\n  class: \"card-body contacts_body\"\n};\nconst _hoisted_13 = {\n  class: \"contacts\"\n};\nconst _hoisted_14 = {\n  class: \"d-flex bd-highlight\"\n};\nconst _hoisted_15 = {\n  class: \"user_info\"\n};\nconst _hoisted_16 = [\"textContent\", \"data-id\", \"data-name\", \"data-is-archive\"];\nconst _hoisted_17 = [\"textContent\"];\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"card-footer\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_19 = {\n  class: \"col-md-8 col-xl-6 chat\"\n};\nconst _hoisted_20 = {\n  class: \"card\"\n};\nconst _hoisted_21 = {\n  class: \"card-header msg_head\"\n};\nconst _hoisted_22 = {\n  class: \"d-flex bd-highlight\"\n};\nconst _hoisted_23 = {\n  class: \"user_info\"\n};\nconst _hoisted_24 = [\"textContent\"];\nconst _hoisted_25 = [\"textContent\"];\nconst _hoisted_26 = {\n  class: \"card-body msg_card_body\"\n};\nconst _hoisted_27 = {\n  key: 0,\n  class: \"d-flex justify-content-end mb-4\"\n};\nconst _hoisted_28 = {\n  class: \"msg_cotainer_send\"\n};\nconst _hoisted_29 = [\"onClick\"];\nconst _hoisted_30 = [\"textContent\"];\nconst _hoisted_31 = [\"textContent\"];\nconst _hoisted_32 = {\n  class: \"img_cont_msg\"\n};\nconst _hoisted_33 = [\"src\"];\nconst _hoisted_34 = {\n  key: 1,\n  class: \"d-flex justify-content-start mb-4\"\n};\nconst _hoisted_35 = {\n  class: \"img_cont_msg\"\n};\nconst _hoisted_36 = [\"src\"];\nconst _hoisted_37 = {\n  class: \"msg_cotainer\"\n};\nconst _hoisted_38 = [\"onClick\"];\nconst _hoisted_39 = [\"textContent\"];\nconst _hoisted_40 = [\"textContent\"];\nconst _hoisted_41 = {\n  class: \"card-footer\"\n};\nconst _hoisted_42 = {\n  class: \"input-group\"\n};\nconst _hoisted_43 = {\n  class: \"input-group-append\"\n};\nconst _hoisted_44 = {\n  class: \"input-group-text send_btn\"\n};\nconst _hoisted_45 = {\n  id: \"contextMenuContactOptions\",\n  class: \"context-menu\",\n  style: {\n    \"display\": \"none\"\n  }\n};\nconst _hoisted_46 = {\n  class: \"menu\"\n};\nconst _hoisted_47 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-trash\",\n  \"aria-hidden\": \"true\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_48 = {\n  id: \"contextMenu\",\n  class: \"context-menu\",\n  style: {\n    \"display\": \"none\"\n  }\n};\nconst _hoisted_49 = {\n  class: \"menu\"\n};\nconst _hoisted_50 = {\n  class: \"copy\"\n};\nconst _hoisted_51 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-copy\",\n  \"aria-hidden\": \"true\"\n}, null, -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_router_link, {\n    class: \"btn btn-primary\",\n    to: \"/contacts/add\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Thêm Bạn\")]),\n    _: 1 /* STABLE */\n  })])]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"Tìm kiếm\",\n    class: \"form-control search\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchContact = $event),\n    onKeypress: _cache[1] || (_cache[1] = (...args) => $options.onSearchKeyPress && $options.onSearchKeyPress(...args)),\n    onKeyup: _cache[2] || (_cache[2] = (...args) => $options.onSearchKeyUp && $options.onSearchKeyUp(...args))\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelText, $data.searchContact]]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"span\", _hoisted_11, [_createElementVNode(\"i\", {\n    class: \"fa fa-search\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.doSearchContact && $options.doSearchContact(...args))\n  })])])])]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"ul\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.contacts, contact => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: contact._id,\n      class: _normalizeClass(contact._id == $data._id ? 'active' : '')\n    }, [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"span\", {\n      textContent: _toDisplayString(contact.name),\n      style: {\n        \"cursor\": \"pointer\"\n      },\n      \"data-id\": contact._id,\n      \"data-name\": contact.name,\n      \"data-is-archive\": contact.isArchive,\n      onClick: _cache[4] || (_cache[4] = (...args) => $options.onChatSelected && $options.onChatSelected(...args))\n    }, null, 8 /* PROPS */, _hoisted_16), contact.unreadMessages > 0 ? (_openBlock(), _createElementBlock(\"p\", {\n      key: 0,\n      textContent: _toDisplayString(' (' + contact.unreadMessages + ')'),\n      class: \"text-danger\"\n    }, null, 8 /* PROPS */, _hoisted_17)) : _createCommentVNode(\"v-if\", true)])])], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))])]), _hoisted_18])]), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"span\", null, [_createElementVNode(\"span\", {\n    textContent: _toDisplayString($data.name)\n  }, null, 8 /* PROPS */, _hoisted_24)]), _createElementVNode(\"p\", null, [_createElementVNode(\"span\", {\n    textContent: _toDisplayString(_ctx.totalMessages),\n    style: {\n      \"font-size\": \"10px\",\n      \"color\": \"rgba(255, 255, 255, 0.6)\"\n    }\n  }, null, 8 /* PROPS */, _hoisted_25), _createTextVNode(\" Tin nhắn \")])])]), _createElementVNode(\"span\", {\n    id: \"action_menu_btn\",\n    class: \"more-options\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.showContactOptions && $options.showContactOptions(...args))\n  })]), _createElementVNode(\"div\", _hoisted_26, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.messages, msg => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: msg._id\n    }, [_ctx.user != null && _ctx.user.email == msg.sender.email ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [_createElementVNode(\"div\", _hoisted_28, [_createElementVNode(\"template\", {\n      class: \"more-options\",\n      onClick: $event => $options.showMoreOptions(msg),\n      \"is-my-message\": true\n    }, [_createElementVNode(\"span\", {\n      textContent: _toDisplayString(msg.message)\n    }, null, 8 /* PROPS */, _hoisted_30)], 8 /* PROPS */, _hoisted_29), _createElementVNode(\"p\", {\n      class: \"msg_time message-data-time\",\n      textContent: _toDisplayString($options.getMessageTime(msg.createdAt))\n    }, null, 8 /* PROPS */, _hoisted_31)]), _createElementVNode(\"div\", _hoisted_32, [_createElementVNode(\"img\", {\n      src: $options.getPicture(msg.sender),\n      class: \"rounded-circle user_img_msg\"\n    }, null, 8 /* PROPS */, _hoisted_33)])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [_createElementVNode(\"div\", _hoisted_35, [_createElementVNode(\"img\", {\n      src: $options.getPicture(msg.sender),\n      class: \"rounded-circle user_img_msg\"\n    }, null, 8 /* PROPS */, _hoisted_36)]), _createElementVNode(\"div\", _hoisted_37, [_createElementVNode(\"template\", {\n      class: \"more-options\",\n      onClick: $event => $options.showMoreOptions(msg),\n      \"is-my-message\": false\n    }, [_createElementVNode(\"span\", {\n      textContent: _toDisplayString(msg.message)\n    }, null, 8 /* PROPS */, _hoisted_39)], 8 /* PROPS */, _hoisted_38), _createElementVNode(\"p\", {\n      class: \"msg_time message-data-time\",\n      textContent: _toDisplayString($options.getMessageTime(msg.createdAt))\n    }, null, 8 /* PROPS */, _hoisted_40)])]))]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_41, [_createElementVNode(\"div\", _hoisted_42, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.message = $event),\n    class: \"form-control type_msg\",\n    placeholder: \"Nhắn tin...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.message]]), _createElementVNode(\"div\", _hoisted_43, [_createElementVNode(\"span\", _hoisted_44, [_createElementVNode(\"i\", {\n    class: \"fa fa-location-arrow\",\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.sendMessage && $options.sendMessage(...args))\n  })])])])])])])])])]), _createElementVNode(\"div\", _hoisted_45, [_createElementVNode(\"ul\", _hoisted_46, [_createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: _cache[8] || (_cache[8] = (...args) => $options.deleteContact && $options.deleteContact(...args))\n  }, [_hoisted_47, _createTextVNode(\" Xóa\")])])])]), _createElementVNode(\"div\", _hoisted_48, [_createElementVNode(\"ul\", _hoisted_49, [_createElementVNode(\"li\", _hoisted_50, [_createElementVNode(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: _cache[9] || (_cache[9] = (...args) => $options.copyMessage && $options.copyMessage(...args))\n  }, [_hoisted_51, _createTextVNode(\" Copy\")])])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","id","style","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_router_link","to","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","type","placeholder","$data","searchContact","$event","onKeypress","_cache","args","$options","onSearchKeyPress","onKeyup","onSearchKeyUp","_hoisted_10","_hoisted_11","onClick","doSearchContact","_hoisted_12","_hoisted_13","_createElementBlock","_Fragment","_renderList","contacts","contact","key","_id","_normalizeClass","_hoisted_14","_hoisted_15","_toDisplayString","name","isArchive","onChatSelected","unreadMessages","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_ctx","totalMessages","showContactOptions","_hoisted_26","messages","msg","user","email","sender","_hoisted_27","_hoisted_28","showMoreOptions","message","getMessageTime","createdAt","_hoisted_32","src","getPicture","_hoisted_34","_hoisted_35","_hoisted_37","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","sendMessage","_hoisted_45","_hoisted_46","href","deleteContact","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","copyMessage","_hoisted_51"],"sources":["D:\\Laptrinh\\Phat_trien_ung_dung_web\\Projects\\Web-Chat\\CT449-WebChat-MEVN-FrontEnd-BuiLeNhutHao-B1910370\\src\\components\\HomeComponent.vue"],"sourcesContent":["<template>\n  <div\n    class=\"container-fluid\"\n    id=\"home-page\"\n    style=\"padding-top: 50px; padding-bottom: 50px\"\n  >\n    <div class=\"row\" style=\"margin-bottom: 50px\">\n      <div class=\"offset-md-10 col-md-2\">\n        <router-link class=\"btn btn-primary\" to=\"/contacts/add\"\n          >Thêm Bạn</router-link\n        >\n      </div>\n    </div>\n\n    <div class=\"container-fluid h-100\">\n      <div class=\"row justify-content-center h-100\">\n        <div class=\"col-md-4 col-xl-3 chat\">\n          <div class=\"card mb-sm-3 mb-md-0 contacts_card\">\n            <div class=\"card-header\">\n              <div class=\"input-group\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Tìm kiếm\"\n                  class=\"form-control search\"\n                  v-model=\"searchContact\"\n                  v-on:keypress=\"onSearchKeyPress\"\n                  v-on:keyup=\"onSearchKeyUp\"\n                />\n                <div class=\"input-group-prepend\">\n                  <span class=\"input-group-text search_btn\"\n                    ><i class=\"fa fa-search\" v-on:click=\"doSearchContact\"></i\n                  ></span>\n                </div>\n              </div>\n            </div>\n            <div class=\"card-body contacts_body\">\n              <ul class=\"contacts\">\n                <li\n                  v-for=\"contact in contacts\"\n                  v-bind:key=\"contact._id\"\n                  v-bind:class=\"contact._id == _id ? 'active' : ''\"\n                >\n                  <div class=\"d-flex bd-highlight\">\n                    <div class=\"user_info\">\n                      <span\n                        v-text=\"contact.name\"\n                        style=\"cursor: pointer\"\n                        v-bind:data-id=\"contact._id\"\n                        v-bind:data-name=\"contact.name\"\n                        v-bind:data-is-archive=\"contact.isArchive\"\n                        v-on:click=\"onChatSelected\"\n                      ></span>\n                      <p\n                        v-if=\"contact.unreadMessages > 0\"\n                        v-text=\"' (' + contact.unreadMessages + ')'\"\n                        class=\"text-danger\"\n                      ></p>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n            </div>\n            <div class=\"card-footer\"></div>\n          </div>\n        </div>\n        <div class=\"col-md-8 col-xl-6 chat\">\n          <div class=\"card\">\n            <div class=\"card-header msg_head\">\n              <div class=\"d-flex bd-highlight\">\n                <div class=\"user_info\">\n                  <span><span v-text=\"name\"></span></span>\n                  <p>\n                    <span\n                      v-text=\"totalMessages\"\n                      style=\"font-size: 10px; color: rgba(255, 255, 255, 0.6)\"\n                    ></span>\n                    Tin nhắn\n                  </p>\n                </div>\n              </div>\n\n              <span\n                id=\"action_menu_btn\"\n                class=\"more-options\"\n                v-on:click=\"showContactOptions\"\n              ></span>\n            </div>\n            <div class=\"card-body msg_card_body\">\n              <div v-for=\"msg in messages\" v-bind:key=\"msg._id\">\n                <template v-if=\"user != null && user.email == msg.sender.email\">\n                  <div class=\"d-flex justify-content-end mb-4\">\n                    <div class=\"msg_cotainer_send\">\n                      <template\n                        class=\"more-options\"\n                        v-on:click=\"showMoreOptions(msg)\"\n                        v-bind:is-my-message=\"true\"\n                      >\n                        <span v-text=\"msg.message\"></span>\n                      </template>\n\n                      <p\n                        class=\"msg_time message-data-time\"\n                        v-text=\"getMessageTime(msg.createdAt)\"\n                      ></p>\n                    </div>\n\n                    <div class=\"img_cont_msg\">\n                      <img\n                        v-bind:src=\"getPicture(msg.sender)\"\n                        class=\"rounded-circle user_img_msg\"\n                      />\n                    </div>\n                  </div>\n                </template>\n\n                <template v-else>\n                  <div class=\"d-flex justify-content-start mb-4\">\n                    <div class=\"img_cont_msg\">\n                      <img\n                        v-bind:src=\"getPicture(msg.sender)\"\n                        class=\"rounded-circle user_img_msg\"\n                      />\n                    </div>\n\n                    <div class=\"msg_cotainer\">\n                      <template\n                        class=\"more-options\"\n                        v-on:click=\"showMoreOptions(msg)\"\n                        v-bind:is-my-message=\"false\"\n                      >\n                        <span v-text=\"msg.message\"></span>\n                      </template>\n\n                      <p\n                        class=\"msg_time message-data-time\"\n                        v-text=\"getMessageTime(msg.createdAt)\"\n                      ></p>\n                    </div>\n                  </div>\n                </template>\n              </div>\n            </div>\n            <div class=\"card-footer\">\n              <div class=\"input-group\">\n                <textarea\n                  v-model=\"message\"\n                  class=\"form-control type_msg\"\n                  placeholder=\"Nhắn tin...\"\n                ></textarea>\n                <div class=\"input-group-append\">\n                  <span class=\"input-group-text send_btn\"\n                    ><i\n                      class=\"fa fa-location-arrow\"\n                      v-on:click=\"sendMessage\"\n                    ></i\n                  ></span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div\n    id=\"contextMenuContactOptions\"\n    class=\"context-menu\"\n    style=\"display: none\"\n  >\n    <ul class=\"menu\">\n      <li>\n        <a href=\"javascript:void(0)\" v-on:click=\"deleteContact\"\n          ><i class=\"fa fa-trash\" aria-hidden=\"true\"></i> Xóa</a\n        >\n      </li>\n    </ul>\n  </div>\n\n  <div id=\"contextMenu\" class=\"context-menu\" style=\"display: none\">\n    <ul class=\"menu\">\n      <li class=\"copy\">\n        <a href=\"javascript:void(0)\" v-on:click=\"copyMessage\"\n          ><i class=\"fa fa-copy\" aria-hidden=\"true\"></i> Copy</a\n        >\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport store from \"../vuex/store\";\n\nimport \"../../public/assets/css/chat.css\";\n\nexport default {\n  data() {\n    return {\n      _id: \"\",\n      name: \"\",\n      message: \"\",\n      page: 0,\n      receiver: null,\n      btnLoadMoreClass: \"fa fa-repeat\",\n      hasMoreMessages: true,\n      selectedMessageId: 0,\n      selectedMessageText: \"\",\n      password: \"\",\n      searchContact: \"\",\n    };\n  },\n\n  computed: {\n    contacts() {\n      return store.getters.getContacts;\n    },\n\n    messages() {\n      return store.getters.getMessages;\n    },\n  },\n\n  methods: {\n    onSearchKeyPress: function () {\n      if (event.key == \"Enter\") {\n        this.doSearchContact();\n      }\n    },\n\n    onSearchKeyUp: function () {\n      this.doSearchContact();\n    },\n\n    showContactOptions: function () {\n      var menu = document.getElementById(\"contextMenuContactOptions\");\n      menu.style.display = \"block\";\n      menu.style.left = event.pageX + \"px\";\n      menu.style.top = event.pageY + \"px\";\n    },\n\n    copyMessage: function () {\n      navigator.clipboard.writeText(this.selectedMessageText);\n    },\n\n    showMoreOptions: function (msg) {\n      const isMyMessage = event.target.getAttribute(\"is-my-message\");\n      this.selectedMessageId = msg._id;\n      this.selectedMessageText = msg.message;\n\n      var menu = document.getElementById(\"contextMenu\");\n      menu.style.display = \"block\";\n      if (isMyMessage == \"true\") {\n        menu.style.left = event.pageX - 200 + \"px\";\n      } else {\n        menu.style.left = event.pageX + \"px\";\n      }\n      menu.style.top = event.pageY + \"px\";\n\n      document.querySelector(\".bookmark i\").className = \"fa fa-bookmark-o\";\n\n      if (msg.bookmarkBy) {\n        document.querySelector(\".bookmark i\").className = \"fa fa-bookmark\";\n      }\n    },\n\n    attachEventListeners: function () {\n      const self = this;\n\n      document.addEventListener(\"click\", function (e) {\n        const moreOptions = document.querySelectorAll(\".more-options\");\n        let isClickedMoreOptions = true;\n        for (let a = 0; a < moreOptions.length; a++) {\n          if (moreOptions[a].contains(e.target)) {\n            // Clicked in box\n            isClickedMoreOptions = true;\n            break;\n          } else {\n            // Clicked outside the box\n            isClickedMoreOptions = false;\n          }\n        }\n        if (!isClickedMoreOptions) {\n          document.getElementById(\"contextMenu\").style.display = \"none\";\n          document.getElementById(\"contextMenuContactOptions\").style.display =\n            \"none\";\n        }\n      });\n    },\n\n    getChatPersonPicture: function (user) {\n      if (typeof user.picture !== \"undefined\" && user.picture != \"\") {\n        return this.$apiURL + \"/\" + user.picture;\n      }\n      return \"../../assets/img/avatar2.png\";\n    },\n\n    getPicture: function (user) {\n      if (typeof user.picture !== \"undefined\") {\n        return this.$apiURL + \"/\" + user.picture;\n      }\n      return \"../../assets/img/avatar7.png\";\n    },\n\n    doSearchContact: async function () {\n      const formData = new FormData();\n      formData.append(\"searchContact\", this.searchContact);\n\n      const response = await axios.post(\n        this.$apiURL + \"/contact/search\",\n        formData,\n        {\n          headers: this.$headers,\n        }\n      );\n\n      if (response.data.status == \"success\") {\n        store.commit(\"setContacts\", response.data.data);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    doSearch: async function () {\n      const form = event.target;\n      const formData = new FormData(form);\n      formData.append(\"email\", this.email);\n      formData.append(\"password\", this.password);\n\n      const response = await axios.post(\n        this.$apiURL + \"/chat/search\",\n        formData,\n        {\n          headers: this.$headers,\n        }\n      );\n\n      if (response.data.status == \"success\") {\n        store.commit(\"setMessages\", []);\n        for (let a = 0; a < response.data.data.length; a++) {\n          store.commit(\"prependMessage\", response.data.data[a]);\n        }\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    getMessageTime: function (time) {\n      const dateObj = new Date(time);\n      let timeStr =\n        dateObj.getDate() +\n        \" \" +\n        this.$months[dateObj.getMonth()] +\n        \", \" +\n        dateObj.getFullYear() +\n        \" \" +\n        dateObj.getHours() +\n        \":\" +\n        dateObj.getMinutes() +\n        \":\" +\n        dateObj.getSeconds();\n      return timeStr;\n    },\n\n    loadMore: function () {\n      this.btnLoadMoreClass = \"fa fa-spinner fa-spin\";\n      this.page++;\n      this.getData();\n    },\n\n    sendMessage: async function () {\n      const formData = new FormData();\n      formData.append(\"_id\", this._id);\n      formData.append(\"message\", this.message);\n      formData.append(\"password\", this.password);\n\n      const response = await axios.post(this.$apiURL + \"/chat/send\", formData, {\n        headers: this.$headers,\n      });\n\n      if (response.data.status == \"success\") {\n        this.message = \"\";\n\n        store.commit(\"appendMessage\", response.data.messageObject);\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    deleteContact: async function () {\n      const self = this;\n\n      swal\n        .fire({\n          title: \"Bạn có chắc không?\",\n          text: \"Điều này sẽ bị xóa khỏi liên hệ của bạn\",\n          icon: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: \"Vâng, xóa nó đi!\",\n        })\n        .then(async function (result) {\n          if (result.isConfirmed) {\n            self.isDeleting = true;\n            const formData = new FormData();\n            formData.append(\"_id\", self._id);\n\n            const response = await axios.post(\n              self.$apiURL + \"/contact/delete\",\n              formData,\n              {\n                headers: self.$headers,\n              }\n            );\n            self.isDeleting = false;\n\n            if (response.data.status == \"success\") {\n              swal.fire(\"Xóa\", response.data.message, \"success\");\n\n              const contactsArr = self.contacts;\n              for (let a = 0; a < contactsArr.length; a++) {\n                if (contactsArr[a]._id == self._id) {\n                  contactsArr.splice(a, 1);\n                  break;\n                }\n              }\n              self.contacts = contactsArr;\n\n              store.commit(\"setMessages\", []);\n              self.totalMessages = 0;\n              self.name = \"\";\n              self._id = \"\";\n            } else {\n              swal.fire(\"Error\", response.data.message, \"error\");\n            }\n          }\n        });\n    },\n\n    onChatSelected: function () {\n      const self = this;\n      store.commit(\"setMessages\", []);\n      this._id = event.target.getAttribute(\"data-id\");\n      this.name = event.target.getAttribute(\"data-name\");\n\n      this.getChat();\n    },\n\n    getChat: async function () {\n      const self = this;\n\n      const formData = new FormData();\n      formData.append(\"_id\", this._id);\n      formData.append(\"page\", this.page);\n      formData.append(\"password\", this.password);\n\n      const response = await axios.post(\n        this.$apiURL + \"/chat/fetch\",\n        formData,\n        {\n          headers: this.$headers,\n        }\n      );\n\n      this.btnLoadMoreClass = \"fa fa-repeat\";\n\n      if (response.data.status == \"success\") {\n        this.totalMessages = response.data.totalMessages;\n\n        for (let a = 0; a < response.data.messages.length; a++) {\n          store.commit(\"prependMessage\", response.data.messages[a]);\n        }\n        this.hasMoreMessages =\n          response.data.messages.length == 0 ? false : true;\n        this.receiver = response.data.receiver;\n        this.user = response.data.user;\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    getData: async function () {\n      const self = this;\n\n      const response = await axios.post(this.$apiURL + \"/contact/fetch\", null, {\n        headers: this.$headers,\n      });\n\n      if (response.data.status == \"success\") {\n        store.commit(\"setContacts\", response.data.contacts);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n  },\n\n  mounted: function () {\n    this.getData();\n  },\n\n  watch: {\n    $route: function (to, from) {\n      store.commit(\"setMessages\", []);\n      store.commit(\"setContacts\", []);\n      this._id = \"\";\n      this.name = \"\";\n      this.isArchive = false;\n    },\n  },\n};\n</script>\n\n<style>\n#home-page {\n  height: 100%;\n  margin: 0;\n  background: #7f7fd5;\n  background: -webkit-linear-gradient(to right, #91eae4, #86a8e7, #7f7fd5);\n  background: linear-gradient(to right, #91eae4, #86a8e7, #7f7fd5);\n}\n\n.chat {\n  margin-top: auto;\n  margin-bottom: auto;\n}\n.card {\n  height: 500px;\n  border-radius: 15px !important;\n  background-color: rgba(0, 0, 0, 0.4) !important;\n}\n.contacts_body {\n  padding: 0.75rem 0 !important;\n  overflow-y: auto;\n  white-space: nowrap;\n}\n.msg_card_body {\n  overflow-y: auto;\n}\n.card-header {\n  border-radius: 15px 15px 0 0 !important;\n  border-bottom: 0 !important;\n}\n.card-footer {\n  border-radius: 0 0 15px 15px !important;\n  border-top: 0 !important;\n  background-color: transparent !important;\n}\n.container {\n  align-content: center;\n}\n.search {\n  border-radius: 15px 0 0 15px !important;\n  background-color: rgba(0, 0, 0, 0.3) !important;\n  border: 0 !important;\n  color: white !important;\n}\n.search:focus {\n  box-shadow: none !important;\n  outline: 0px !important;\n}\n.type_msg {\n  background-color: rgba(0, 0, 0, 0.3) !important;\n  border: 0 !important;\n  color: white !important;\n  height: 60px !important;\n  overflow-y: auto;\n}\n.type_msg:focus {\n  box-shadow: none !important;\n  outline: 0px !important;\n}\n.attach_btn {\n  border-radius: 15px 0 0 15px !important;\n  background-color: rgba(0, 0, 0, 0.3) !important;\n  border: 0 !important;\n  color: white !important;\n  cursor: pointer;\n}\n.send_btn {\n  border-radius: 0 15px 15px 0 !important;\n  background-color: rgba(0, 0, 0, 0.3) !important;\n  border: 0 !important;\n  color: white !important;\n  cursor: pointer;\n}\n.search_btn {\n  border-radius: 0 15px 15px 0 !important;\n  background-color: rgba(0, 0, 0, 0.3) !important;\n  border: 0 !important;\n  color: white !important;\n  cursor: pointer;\n}\n.contacts {\n  list-style: none;\n  padding: 0;\n}\n.contacts li {\n  width: 100% !important;\n  padding: 5px 10px;\n  margin-bottom: 15px !important;\n}\n.active {\n  background-color: rgba(0, 0, 0, 0.3);\n}\n.user_img {\n  height: 70px;\n  width: 70px;\n  border: 1.5px solid #f5f6fa;\n}\n.user_img_msg {\n  height: 40px;\n  width: 40px;\n  border: 1.5px solid #f5f6fa;\n}\n.img_cont {\n  position: relative;\n  height: 70px;\n  width: 70px;\n}\n.img_cont_msg {\n  height: 40px;\n  width: 40px;\n}\n.online_icon {\n  position: absolute;\n  height: 15px;\n  width: 15px;\n  background-color: #4cd137;\n  border-radius: 50%;\n  bottom: 0.2em;\n  right: 0.4em;\n  border: 1.5px solid white;\n}\n.offline {\n  background-color: #c23616 !important;\n}\n.user_info {\n  margin-top: auto;\n  margin-bottom: auto;\n  margin-left: 15px;\n}\n.user_info span {\n  font-size: 20px;\n  color: white;\n}\n.user_info p {\n  font-size: 10px;\n  color: rgba(255, 255, 255, 0.6);\n}\n.video_cam {\n  margin-left: 50px;\n  margin-top: 5px;\n}\n.video_cam span {\n  color: white;\n  font-size: 20px;\n  cursor: pointer;\n  margin-right: 20px;\n}\n.msg_cotainer {\n  margin-top: auto;\n  margin-bottom: auto;\n  margin-left: 10px;\n  border-radius: 25px;\n  background-color: #82ccdd;\n  padding: 10px;\n  position: relative;\n}\n.msg_cotainer_send {\n  margin-top: auto;\n  margin-bottom: auto;\n  margin-right: 10px;\n  border-radius: 25px;\n  background-color: #78e08f;\n  padding: 10px;\n  position: relative;\n}\n.msg_time {\n  /*position: absolute;\n        left: 0;\n        bottom: -15px;\n        color: rgba(255,255,255,0.5);*/\n  font-size: 10px;\n  margin-bottom: 0px;\n  margin-top: 10px;\n}\n.msg_time_send {\n  position: absolute;\n  right: 0;\n  bottom: -15px;\n  color: rgba(255, 255, 255, 0.5);\n  font-size: 10px;\n}\n.msg_head {\n  position: relative;\n}\n#action_menu_btn {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  color: white;\n  cursor: pointer;\n  font-size: 20px;\n}\n.action_menu {\n  z-index: 1;\n  position: absolute;\n  padding: 15px 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  color: white;\n  border-radius: 15px;\n  top: 30px;\n  right: 15px;\n  display: none;\n}\n.action_menu ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.action_menu ul li {\n  width: 100%;\n  padding: 10px 15px;\n  margin-bottom: 5px;\n}\n.action_menu ul li i {\n  padding-right: 10px;\n}\n.action_menu ul li:hover {\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n@media (max-width: 576px) {\n  .contacts_card {\n    margin-bottom: 15px !important;\n  }\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}