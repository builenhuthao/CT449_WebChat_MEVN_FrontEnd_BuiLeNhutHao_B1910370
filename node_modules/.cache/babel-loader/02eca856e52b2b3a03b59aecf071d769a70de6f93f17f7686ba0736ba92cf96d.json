{"ast":null,"code":"import axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport store from \"../vuex/store\";\nexport default {\n  data() {\n    return {\n      isDisabled: false,\n      picture: \"\"\n    };\n  },\n  methods: {\n    previewImage: function () {\n      const self = this;\n      const files = event.target.files;\n      if (files.length > 0) {\n        const fileReader = new FileReader();\n        fileReader.onload = function () {\n          self.picture = event.target.result;\n        };\n        fileReader.readAsDataURL(files[0]);\n      }\n    },\n    updateProfile: async function () {\n      this.isDisabled = true;\n      const form = event.target;\n      const formData = new FormData(form);\n      const response = await axios.post(this.$apiURL + \"/updateProfile\", formData, {\n        headers: this.$headers\n      });\n      this.isDisabled = false;\n      store.commit(\"setUser\", response.data.user);\n      swal.fire(\"Profile update\", response.data.message, response.data.status);\n    }\n  },\n  mounted: function () {\n    const self = this;\n    setTimeout(function () {\n      if (self.user != null) {\n        self.picture = self.$apiURL + \"/\" + self.user.picture;\n      }\n    }, 100);\n  },\n  computed: {\n    user() {\n      return store.getters.getUser;\n    }\n  }\n};","map":{"version":3,"names":["axios","swal","store","data","isDisabled","picture","methods","previewImage","self","files","event","target","length","fileReader","FileReader","onload","result","readAsDataURL","updateProfile","form","formData","FormData","response","post","$apiURL","headers","$headers","commit","user","fire","message","status","mounted","setTimeout","computed","getters","getUser"],"sources":["D:\\Laptrinh\\Phat_trien_ung_dung_web\\Projects\\Web-Chat\\CT449-WebChat-MEVN-FrontEnd-BuiLeNhutHao-B1910370\\src\\components\\ProfileComponent.vue"],"sourcesContent":["<template>\n  <div class=\"container\" style=\"margin-top: 50px\">\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <h2 class=\"text-center\">Thông Tin Cá Nhân</h2>\n        <img v-bind:src=\"picture\" style=\"width: 100%\" />\n      </div>\n    </div>\n\n    <div class=\"row\" style=\"margin-top: 30px\">\n      <div class=\"offset-md-3 col-md-6\">\n        <form v-on:submit.prevent=\"updateProfile\" enctype=\"multipart/form-data\">\n          <input\n            type=\"file\"\n            name=\"picture\"\n            accept=\"image/*\"\n            class=\"form-control\"\n            v-on:change=\"previewImage\"\n          />\n\n          <div class=\"form-group\">\n            <label>Name</label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              class=\"form-control\"\n              v-bind:value=\"user.name\"\n              required\n            />\n          </div>\n\n          <br />\n\n          <div class=\"form-group\">\n            <label>Email</label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              class=\"form-control\"\n              v-bind:value=\"user.email\"\n              disabled\n            />\n          </div>\n\n          <br />\n\n          <input\n            type=\"submit\"\n            class=\"btn btn-primary\"\n            value=\"Update profile\"\n            v-bind:disabled=\"isDisabled\"\n          />\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport store from \"../vuex/store\";\n\nexport default {\n  data() {\n    return {\n      isDisabled: false,\n      picture: \"\",\n    };\n  },\n\n  methods: {\n    previewImage: function () {\n      const self = this;\n      const files = event.target.files;\n      if (files.length > 0) {\n        const fileReader = new FileReader();\n\n        fileReader.onload = function () {\n          self.picture = event.target.result;\n        };\n\n        fileReader.readAsDataURL(files[0]);\n      }\n    },\n\n    updateProfile: async function () {\n      this.isDisabled = true;\n\n      const form = event.target;\n      const formData = new FormData(form);\n\n      const response = await axios.post(\n        this.$apiURL + \"/updateProfile\",\n        formData,\n        {\n          headers: this.$headers,\n        }\n      );\n      this.isDisabled = false;\n      store.commit(\"setUser\", response.data.user);\n\n      swal.fire(\"Profile update\", response.data.message, response.data.status);\n    },\n  },\n\n  mounted: function () {\n    const self = this;\n    setTimeout(function () {\n      if (self.user != null) {\n        self.picture = self.$apiURL + \"/\" + self.user.picture;\n      }\n    }, 100);\n  },\n\n  computed: {\n    user() {\n      return store.getters.getUser;\n    },\n  },\n};\n</script>\n"],"mappings":"AA2DA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,IAAG,MAAO,aAAa;AAC9B,OAAOC,KAAI,MAAO,eAAe;AAEjC,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EAEDC,OAAO,EAAE;IACPC,YAAY,EAAE,SAAAA,CAAA,EAAY;MACxB,MAAMC,IAAG,GAAI,IAAI;MACjB,MAAMC,KAAI,GAAIC,KAAK,CAACC,MAAM,CAACF,KAAK;MAChC,IAAIA,KAAK,CAACG,MAAK,GAAI,CAAC,EAAE;QACpB,MAAMC,UAAS,GAAI,IAAIC,UAAU,EAAE;QAEnCD,UAAU,CAACE,MAAK,GAAI,YAAY;UAC9BP,IAAI,CAACH,OAAM,GAAIK,KAAK,CAACC,MAAM,CAACK,MAAM;QACpC,CAAC;QAEDH,UAAU,CAACI,aAAa,CAACR,KAAK,CAAC,CAAC,CAAC,CAAC;MACpC;IACF,CAAC;IAEDS,aAAa,EAAE,eAAAA,CAAA,EAAkB;MAC/B,IAAI,CAACd,UAAS,GAAI,IAAI;MAEtB,MAAMe,IAAG,GAAIT,KAAK,CAACC,MAAM;MACzB,MAAMS,QAAO,GAAI,IAAIC,QAAQ,CAACF,IAAI,CAAC;MAEnC,MAAMG,QAAO,GAAI,MAAMtB,KAAK,CAACuB,IAAI,CAC/B,IAAI,CAACC,OAAM,GAAI,gBAAgB,EAC/BJ,QAAQ,EACR;QACEK,OAAO,EAAE,IAAI,CAACC;MAChB,EACD;MACD,IAAI,CAACtB,UAAS,GAAI,KAAK;MACvBF,KAAK,CAACyB,MAAM,CAAC,SAAS,EAAEL,QAAQ,CAACnB,IAAI,CAACyB,IAAI,CAAC;MAE3C3B,IAAI,CAAC4B,IAAI,CAAC,gBAAgB,EAAEP,QAAQ,CAACnB,IAAI,CAAC2B,OAAO,EAAER,QAAQ,CAACnB,IAAI,CAAC4B,MAAM,CAAC;IAC1E;EACF,CAAC;EAEDC,OAAO,EAAE,SAAAA,CAAA,EAAY;IACnB,MAAMxB,IAAG,GAAI,IAAI;IACjByB,UAAU,CAAC,YAAY;MACrB,IAAIzB,IAAI,CAACoB,IAAG,IAAK,IAAI,EAAE;QACrBpB,IAAI,CAACH,OAAM,GAAIG,IAAI,CAACgB,OAAM,GAAI,GAAE,GAAIhB,IAAI,CAACoB,IAAI,CAACvB,OAAO;MACvD;IACF,CAAC,EAAE,GAAG,CAAC;EACT,CAAC;EAED6B,QAAQ,EAAE;IACRN,IAAIA,CAAA,EAAG;MACL,OAAO1B,KAAK,CAACiC,OAAO,CAACC,OAAO;IAC9B;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}