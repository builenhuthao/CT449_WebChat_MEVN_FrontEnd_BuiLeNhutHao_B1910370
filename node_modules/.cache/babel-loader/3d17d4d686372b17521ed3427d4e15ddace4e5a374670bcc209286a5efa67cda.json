{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\",\n  style: {\n    \"margin-top\": \"50px\"\n  }\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"row\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-md-12\"\n}, [/*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-center\"\n}, \"Notifications\")])], -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"col-md-12\"\n};\nconst _hoisted_5 = {\n  class: \"table table-hover\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Type\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Actions\")])], -1 /* HOISTED */);\nconst _hoisted_7 = [\"textContent\"];\nconst _hoisted_8 = [\"textContent\"];\nconst _hoisted_9 = {\n  style: {\n    \"display\": \"flex\"\n  }\n};\nconst _hoisted_10 = [\"value\"];\nconst _hoisted_11 = [\"value\", \"isDeleting\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"table\", _hoisted_5, [_hoisted_6, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.notifications, notification => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: notification._id\n    }, [_createElementVNode(\"td\", null, [_createElementVNode(\"span\", {\n      textContent: _toDisplayString(notification.type)\n    }, null, 8 /* PROPS */, _hoisted_7), _createTextVNode(\"Â  \"), notification.type == 'group_invite' ? (_openBlock(), _createElementBlock(\"span\", {\n      key: 0,\n      textContent: _toDisplayString(notification.group.name)\n    }, null, 8 /* PROPS */, _hoisted_8)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"td\", _hoisted_9, [_createElementVNode(\"form\", {\n      onSubmit: _cache[0] || (_cache[0] = _withModifiers((...args) => $options.deleteNotification && $options.deleteNotification(...args), [\"prevent\"]))\n    }, [_createElementVNode(\"input\", {\n      type: \"hidden\",\n      name: \"_id\",\n      value: notification._id,\n      required: \"\"\n    }, null, 8 /* PROPS */, _hoisted_10), _createElementVNode(\"input\", {\n      type: \"submit\",\n      value: _ctx.isDeleting ? 'Deleting...' : 'Delete',\n      isDeleting: _ctx.disabled,\n      class: \"btn btn-danger\"\n    }, null, 8 /* PROPS */, _hoisted_11)], 32 /* HYDRATE_EVENTS */)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])])]);\n}","map":{"version":3,"names":["class","style","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","$options","notifications","notification","key","_id","_toDisplayString","type","group","name","_hoisted_9","onSubmit","_cache","_withModifiers","args","deleteNotification","value","required","_ctx","isDeleting","disabled"],"sources":["D:\\Laptrinh\\Phat_trien_ung_dung_web\\Projects\\Web-Chat\\CT449-WebChat-MEVN-FrontEnd-BuiLeNhutHao-B1910370\\src\\components\\NotificationsComponent.vue"],"sourcesContent":["<template>\n  <div class=\"container\" style=\"margin-top: 50px\">\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <h1 class=\"text-center\">Notifications</h1>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <table class=\"table table-hover\">\n          <thead>\n            <tr>\n              <th>Type</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            <tr\n              v-for=\"notification in notifications\"\n              v-bind:key=\"notification._id\"\n            >\n              <td>\n                <span v-text=\"notification.type\"></span>&nbsp;\n\n                <template v-if=\"notification.type == 'group_invite'\">\n                  <span v-text=\"notification.group.name\"></span>\n                </template>\n              </td>\n\n              <td style=\"display: flex\">\n                <form v-on:submit.prevent=\"deleteNotification\">\n                  <input\n                    type=\"hidden\"\n                    name=\"_id\"\n                    v-bind:value=\"notification._id\"\n                    required\n                  />\n                  <input\n                    type=\"submit\"\n                    v-bind:value=\"isDeleting ? 'Deleting...' : 'Delete'\"\n                    v-bind:isDeleting=\"disabled\"\n                    class=\"btn btn-danger\"\n                  />\n                </form>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport store from \"../vuex/store\";\n\nexport default {\n  date() {\n    return {\n      isDeleting: false,\n    };\n  },\n\n  methods: {\n    markAsRead: async function () {\n      const response = await axios.post(\n        this.$apiURL + \"/markNotificationsAsRead\",\n        null,\n        {\n          headers: this.$headers,\n        }\n      );\n\n      if (response.data.status == \"success\") {\n        const tempNotifications = store.getters.getNotifications;\n        for (let a = 0; a < tempNotifications.length; a++) {\n          tempNotifications[a].isRead = true;\n        }\n        store.commit(\"setNotifications\", tempNotifications);\n\n        store.commit(\"setUnreadNotifications\", 0);\n      }\n    },\n\n    deleteNotification: async function () {\n      const form = event.target;\n      const _id = form._id.value;\n      const formData = new FormData(form);\n\n      this.isDeleting = true;\n\n      const response = await axios.post(\n        this.$apiURL + \"/deleteNotification\",\n        formData,\n        {\n          headers: this.$headers,\n        }\n      );\n      this.isDeleting = false;\n\n      if (response.data.status == \"success\") {\n        // remove from local array\n        const tempNotifications = store.getters.getNotifications;\n        for (let a = 0; a < tempNotifications.length; a++) {\n          if (tempNotifications[a]._id == _id) {\n            tempNotifications.splice(a, 1);\n            break;\n          }\n        }\n        store.commit(\"setNotifications\", tempNotifications);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n  },\n\n  mounted: function () {\n    this.markAsRead();\n  },\n\n  computed: {\n    notifications() {\n      return store.getters.getNotifications.reverse();\n    },\n  },\n};\n</script>\n"],"mappings":";;EACOA,KAAK,EAAC,WAAW;EAACC,KAAwB,EAAxB;IAAA;EAAA;;gCACrBC,mBAAA,CAIM;EAJDF,KAAK,EAAC;AAAK,I,aACdE,mBAAA,CAEM;EAFDF,KAAK,EAAC;AAAW,I,aACpBE,mBAAA,CAA0C;EAAtCF,KAAK,EAAC;AAAa,GAAC,eAAa,E;;EAIpCA,KAAK,EAAC;AAAK;;EACTA,KAAK,EAAC;AAAW;;EACbA,KAAK,EAAC;AAAmB;gCAC9BE,mBAAA,CAKQ,gB,aAJNA,mBAAA,CAGK,a,aAFHA,mBAAA,CAAa,YAAT,MAAI,G,aACRA,mBAAA,CAAgB,YAAZ,SAAO,E;;;;EAiBPD,KAAqB,EAArB;IAAA;EAAA;AAAqB;;;;uBA9BrCE,mBAAA,CAmDM,OAnDNC,UAmDM,GAlDJC,UAIM,EAENH,mBAAA,CA2CM,OA3CNI,UA2CM,GA1CJJ,mBAAA,CAyCM,OAzCNK,UAyCM,GAxCJL,mBAAA,CAuCQ,SAvCRM,UAuCQ,GAtCNC,UAKQ,EAERP,mBAAA,CA8BQ,iB,kBA7BNC,mBAAA,CA4BKO,SAAA,QAAAC,WAAA,CA3BoBC,QAAA,CAAAC,aAAa,EAA7BC,YAAY;yBADrBX,mBAAA,CA4BK;MA1BIY,GAAG,EAAED,YAAY,CAACE;QAEzBd,mBAAA,CAMK,aALHA,mBAAA,CAAwC;mBAAlCe,gBAAA,CAAQH,YAAY,CAACI,IAAI;0DAAS,IAExC,GAAgBJ,YAAY,CAACI,IAAI,sB,cAC/Bf,mBAAA,CAA8C;;mBAAxCc,gBAAA,CAAQH,YAAY,CAACK,KAAK,CAACC,IAAI;gFAIzClB,mBAAA,CAeK,MAfLmB,UAeK,GAdHnB,mBAAA,CAaO;MAbIoB,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUb,QAAA,CAAAc,kBAAA,IAAAd,QAAA,CAAAc,kBAAA,IAAAD,IAAA,CAAkB;QAC3CvB,mBAAA,CAKE;MAJAgB,IAAI,EAAC,QAAQ;MACbE,IAAI,EAAC,KAAK;MACHO,KAAK,EAAEb,YAAY,CAACE,GAAG;MAC9BY,QAAQ,EAAR;0CAEF1B,mBAAA,CAKE;MAJAgB,IAAI,EAAC,QAAQ;MACNS,KAAK,EAAEE,IAAA,CAAAC,UAAU;MACjBA,UAAU,EAAED,IAAA,CAAAE,QAAQ;MAC3B/B,KAAK,EAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}